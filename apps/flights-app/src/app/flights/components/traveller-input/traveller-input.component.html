<div
  (click)="isOpen = !isOpen"
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  class="input-trigger"
>
  <span
    >{{
      travellersCount.adults +
        travellersCount.children +
        travellersCount.infants
    }}
    Traveller(s)</span
  >
  <fa-icon [icon]="faAngleDown" class="angle-down"></fa-icon>
</div>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isOpen"
  (overlayOutsideClick)="isOpen = false"
  (detach)="isOpen = false"
>
  <div class="traveller-input-overlay">
    <app-traveller-count-input
      [count]="travellersCount.adults"
      label="Adults"
      [minCount]="1"
      [maxCount]="maxAllowedAdultsCount"
      helpText="(12+ years)"
      (countChange)="onAdultsCountChange($event)"
    ></app-traveller-count-input>
    <app-traveller-count-input
      [count]="travellersCount.children"
      [minCount]="0"
      [maxCount]="getMaxChildrenCount()"
      label="Children"
      helpText="(2-12 years)"
      (countChange)="onChildrenCountChange($event)"
    ></app-traveller-count-input>
    <app-traveller-count-input
      [count]="travellersCount.infants"
      [minCount]="0"
      [maxCount]="travellersCount.adults"
      label="Infants"
      helpText="(below 2 years)"
      (countChange)="onInfantsCountChange($event)"
    ></app-traveller-count-input>
  </div>
</ng-template>
